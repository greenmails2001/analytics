    <!-- code to include the highcharts and jQuery libraries goes here -->
    <!-- load_charts filter takes a comma-separated list of id's where -->
    <!-- the charts need to be rendered to                             -->

    <script src="http://code.highcharts.com/highcharts.js" type="text/javascript"></script>
    <script src="http://code.highcharts.com/modules/exporting.js" type="text/javascript"></script>

    {# hightcharts tự tạo js, phù hợp với những report đơn giản, nhưng khó control với report phức tạp #}
    {#% load chartit %#}
    {# { weatherchart|load_charts:"container" } #}
<div class="col-sm-{{ item.size }} col-xs-12">
      <div class="panel panel-default text-center">
        <div class="panel-heading">
            <h6>{{item}}</h6>
        </div>
        <div class="panel-body">

            <form name="classic">
                <select name="sites" id="sites_{{ item.id }}" size="1"  style="width: 150px">
                    <option selected>Select A Site</option>
                    {% for f in json_filter %}
                            <option value="{{ f.SiteID }}">{{ f.SiteID }}. {{ f.SiteName }}</option>

                    {% endfor %}
                </select>

                <select name="tasks" id="tasks_{{ item.id }}" size="1"  style="width: 350px">
                    <option selected>Select A Task</option>
                    {% for t in json_filter %}
                        <option value="{{ t.SiteID }}">{{ t.SiteID }}. {{ t.SiteName }}</option>
                    {% endfor %}
                </select>
                </select>
            </form>

            <div class="btn-group">
                <button type="button" id="btnSearch_{{ item.id }}" class="btn btn-primary">Search</button>
            </div>

            <!--/form-->
            <!-- Search box End -->
            <div id="container_{{ item.id }}" style="width:100%; height:600px;"> Chart will be rendered here </div>
        </div>
      </div>
 </div>

<script  type="text/javascript">

    var map_x1 = {
                {% for r in json_data %}
                        {% if r.name == 'Label' %} '{{ r.filter }}' : {{ r.data|safe }}{% if not forloop.last %},{% endif %}
                        {% endif %}
                {% endfor %}
            };

            var map_y1 = {
                {% for r in json_data %}
                        {% if r.name == 'Revenue' %} '{{ r.filter }}' : {{ r.data|safe }}{% if not forloop.last %},{% endif %}
                        {% endif %}
                {% endfor %}
            };
        var map_y2 = {
                {% for r in json_data %}
                        {% if r.name == 'RevenueUpt' %} '{{ r.filter }}' : {{ r.data|safe }}{% if not forloop.last %},{% endif %}
                        {% endif %}
                {% endfor %}
            };
        var map_y3 = {
                {% for r in json_data %}
                        {% if r.name == 'RevenueAct' %} '{{ r.filter }}' : {{ r.data|safe }}{% if not forloop.last %},{% endif %}
                        {% endif %}
                {% endfor %}
            };
        var map_y4 = {
                {% for r in json_data %}
                        {% if r.name == 'Extra' %} '{{ r.filter }}' : {{ r.data|safe }}{% if not forloop.last %},{% endif %}
                        {% endif %}
                {% endfor %}
            };

    var resultSite='';
    var resultTask='';
    $("#sites_"+'{{ item.id }}').change(function(){
        var selText = $(this).val();
        alert(selText);
        resultSite=this.options[this.options.selectedIndex].value;
        alert(resultSite);

    });
    $("#tasks_"+'{{ item.id }}').change(function(){
        //var selText = $(this).text();
        //alert(selText);
        resultTask=this.options[this.options.selectedIndex].value;
        alert(resultTask);
    });

    var array_x1 = map_x1['S123'];
    var array_y1 = map_y1['S123'];
    var array_y2 = map_y2['S123'];
    var array_y3 = map_y3['S123'];
    var array_y4 = map_y4['S123'];

    $("#btnSearch_"+'{{ item.id }}').click(function(){
        alert(resultSite);
        array_x1 = map_x1[resultSite];
        array_y1 = map_y1[resultSite];
        array_y2 = map_y2[resultSite];
        array_y3 = map_y3[resultSite];
        array_y4 = map_y4[resultSite];

        LoadHighcharts('{{ item.id }}');
    });
    //demo highchart với js
    //$(function(){
            //alert(resultSite.concat(resultTask));
            //alert(resultSite);

        function LoadHighcharts(item_id) {
            //alert(item_id);
            //alert(array_x1);alert(array_y1);alert(array_y2);alert(array_y3);alert(array_y4);
            $("#container_"+item_id).highcharts({
                chart: {
                    type: 'line'
                },
                title: {
                    text: 'Revenue Chart'
                },
                xAxis: {
                    categories: array_x1
                },
                yAxis: {
                    title: {
                        text: 'numbers'
                    }
                },
                tooltip: {
                    shared: true
                },
                series: [
                    {name: 'Revenue', data: array_y1},
                    {name: 'RevenueUpt', data: array_y2},
                    {name: 'RevenueAct', data: array_y3},
                    {name: 'ExtraValue', data: array_y4}
                ]
            });
        }
    //});

</script>

