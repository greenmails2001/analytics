<!DOCTYPE html>
<html lang="en">
{% load staticfiles %}

<title>
       report detail
</title>
<head>
    <!-- code to include the highcharts and jQuery libraries goes here -->
    <!-- load_charts filter takes a comma-separated list of id's where -->
    <!-- the charts need to be rendered to                             -->


    <script src="{% static "js/jquery.min.js" %}"></script>
    <script src="http://code.highcharts.com/highcharts.js" type="text/javascript"></script>
    <link href="{% static "css/base.css" %}" rel="stylesheet">
    {# hightcharts tự tạo js, phù hợp với những report đơn giản, nhưng khó control với report phức tạp #}
    {#% load chartit %#}
    {# { weatherchart|load_charts:"container" } #}
</head>
<body>
    <!-- Search box Start -->
    <form name="classic">
        <select name="sites" class="sites" size="6"  style="width: 150px">
            <option selected>Select A Site</option>
            {% for s in sites %}
                <option value="{{ s.siteid }}">{{ s.sitename }}</option>
            {% endfor %}
        </select>

        <select name="tasks" class="tasks" size="6"  style="width: 350px">
            <option selected>Select A Task</option>
            {% for t in tasks %}
                <option value="{{ t.taskid }}">{{ t.taskid }}. {{ t.shortname }}</option>
            {% endfor %}
        </select>
        </select>
    </form>
    <div class="btn-group">
        <button type="button" id="btnSearch" class="btn btn-primary">Search</button>
    </div>

    <!--/form-->
    <!-- Search box End -->

    <div id='container' style="width:100%; height:600px;"> Chart will be rendered here </div>
</body>

<script>
    var array_dates=[{% for date in updates %}
                    {% if not forloop.first %},{% endif %}
                        '{{date}}'
                {% endfor %}];
    var array_profs=[{% for prof in profs %}
                    {% if not forloop.first %},{% endif %}
                        {{prof}}
                {% endfor %}];
    var array_prof_acts=[{% for prof_act in prof_acts %}
                    {% if not forloop.first %},{% endif %}
                        {{prof_act}}
                {% endfor %}];

    //demo highchart với js
    $(function () {
        $('#container').highcharts({
            chart: {
            type: 'line'
            },
            title: {
            text: 'Profit Chart'
            },
            xAxis: {
            categories: array_dates
            },
            yAxis: {
            title: {
            text: 'numbers'
            }
            },
            series: [
                {name: 'Profit',data: array_profs},
                {name: 'ProfitAct',data: array_prof_acts},
                {name: 'ProfitTest',data: ['','','','','','','','','',.1,.3,.4,.6,.7,.9]}
            ]
        });
    });
</script>


<script type="text/javascript">


    $(".sites").click(function(){
        //var selText = $(this).text();
        resultSite=this.options[this.options.selectedIndex].value;
        //alert(resultSite);
    });
    $(".tasks").click(function(){
        //var selText = $(this).text();
        //alert(selText);
        resultTask=this.options[this.options.selectedIndex].value;
        //alert(resultTask);
    });

    $("#btnSearch").click(function(){
        alert(resultSite.concat(resultTask));
    });

</script>

</html>
