<!DOCTYPE html>
<html lang="en">
{% load staticfiles %}

<title>
       report detail
</title>
<head>
    <!-- code to include the highcharts and jQuery libraries goes here -->
    <!-- load_charts filter takes a comma-separated list of id's where -->
    <!-- the charts need to be rendered to                             -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="http://code.highcharts.com/highcharts.js" type="text/javascript"></script>
    <link href="{% static "css/base.css" %}" rel="stylesheet">
    {% load chartit %}
    {{ weatherchart|load_charts:"container" }}
</head>
<body>
    <!-- Search box Start -->
    <!--form-->
        <div class="well carousel-search hidden-sm">
            <div class="btn-group">
                <a class="btn btn-default dropdown-toggle btn-select" data-toggle="dropdown"
                   href="#">
                    Select a Site
                    <span class="caret"></span>
                </a>
                <li class="divider"></li>
                <ul class="dropdown-menu">
                    {% for s in sites %}
                        <li data-id="{{ s.siteid }}" {% if s == psite %} class="selected"{% endif %}>
                            <a href="#">
                                                            {{ s.sitename }}
                            </a>
                        </li>

                    {% endfor %}

                    <!--li><a href="#"><span class="glyphicon glyphicon-star"></span> All</a></li-->
                </ul>
            </div>
            <div class="btn-group">
                <button type="button" id="btnSearch" class="btn btn-primary">Search</button>
            </div>
        </div>
    <!--/form-->
    <!-- Search box End -->


    <form name="classic">
        <select name="countries" class="countries" size="4" onChange="updatecities(this.selectedIndex)" style="width: 150px">
            <option selected>Select A City</option>
                <option value="usa">USA</option>
                <option value="canada">Canada</option>
                <option value="uk">United Kingdom</option>
        </select>

        <select name="cities" class="cities" size="4" style="width: 150px">
        </select>
    </form>

    <form name="classic">
        <select name="sites" class="sites" size="6"  style="width: 150px">
            <option selected>Select A Site</option>
            {% for s in sites %}
                <option value="{{ s.siteid }}">{{ s.sitename }}</option>
            {% endfor %}
        </select>

        <select name="tasks" class="tasks" size="6"  style="width: 350px">
            <option selected>Select A Task</option>
            {% for t in tasks %}
                <option value="{{ t.taskid }}">{{ t.taskid }}. {{ t.shortname }}</option>
            {% endfor %}
        </select>
        </select>
    </form>

    <div id='container'> Chart will be rendered here </div>
</body>



<script type="text/javascript">

    var countrieslist=document.classic.countries
    var citieslist=document.classic.cities

    var cities=new Array()
    cities[0]=""
    cities[1]=["New York|newyorkvalue", "Los Angeles|loangelesvalue", "Chicago|chicagovalue", "Houston|houstonvalue", "Austin|austinvalue"]
    cities[2]=["Vancouver|vancouvervalue", "Tonronto|torontovalue", "Montreal|montrealvalue", "Calgary|calgaryvalue"]
    cities[3]=["London|londonvalue", "Glasgow|glasgowsvalue", "Manchester|manchestervalue", "Edinburgh|edinburghvalue", "Birmingham|birminghamvalue"]
    var resultCountry='';
    var resultCity='';

    function updatecities(selectedcitygroup){
        resultCountry=selectedcitygroup;
        citieslist.options.length=0
        if (selectedcitygroup>0){
            for (i=0; i<cities[selectedcitygroup].length; i++)
                citieslist.options[citieslist.options.length]=new Option(cities[selectedcitygroup][i].split("|")[0], cities[selectedcitygroup][i].split("|")[1])
        }
    }

    $(".countries").click(function(){
                    //var selText = $(this).text();
        resultCountry=this.options[this.options.selectedIndex].value;
                    alert(resultCountry);

                });
    $(".cities").click(function(){
        //var selText = $(this).text();
          //          alert(selText);
        resultCity=this.options[this.options.selectedIndex].value;
            alert(resultCity);
    });

    $(".dropdown-menu li a").click(function(){
        var selText = $(this).text();
        $(this).parents('.btn-group').find('.dropdown-toggle').html(selText+' <span class="caret"></span>');
    });

    $(".sites").click(function(){
                    //var selText = $(this).text();
        resultSite=this.options[this.options.selectedIndex].value;
                    alert(resultSite);

                });
    $(".tasks").click(function(){
        //var selText = $(this).text();
          //          alert(selText);
        resultTask=this.options[this.options.selectedIndex].value;
            alert(resultTask);
    });

    $("#btnSearch").click(function(){
        alert(resultCountry.concat(resultCity));
        alert(resultSite.concat(resultTask));
    });

</script>

</html>
